@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Design System Colors */
    --background: #0A0A0B;
    --panel: #18181B;
    --panel-80: rgba(24, 24, 27, 0.8);
    --border: #27272A;
    --text-primary: #FAFAFA;
    --text-secondary: #A1A1AA;
    --text-tertiary: #71717A;
    --accent: #7C3AED;
    --accent-light: #A855F7;
    --success: #10B981;
    --warning: #F59E0B;
    --error: #EF4444;

    /* Surface Colors */
    --surface-1: #111113;
    --surface-2: #1A1A1D;
    --surface-3: #222225;

    /* Collaboration Colors */
    --collab-pink: #EC4899;
    --collab-blue: #3B82F6;
    --collab-green: #10B981;
    --collab-orange: #F59E0B;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-text-primary;
    font-family: 'IBM Plex Sans', 'Inter', system-ui, -apple-system, sans-serif;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'DM Sans', 'Inter', system-ui, sans-serif;
    font-weight: 600;
  }

  code, pre {
    @apply font-mono;
  }

  /* Global focus-visible ring */
  :focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.5);
    border-radius: 4px;
  }
}

@layer components {
  /* Glassmorphism effect */
  .glass {
    @apply bg-panel-80 backdrop-blur-glass border border-border rounded shadow-glass;
  }

  /* Selection glow effect */
  .selection-glow {
    @apply ring-2 ring-accent shadow-glow;
  }

  /* Panel styling */
  .panel {
    @apply glass;
  }

  /* Button variants */
  .btn-primary {
    @apply bg-gradient-to-r from-accent to-accent-light text-white px-4 py-2 rounded font-medium;
    @apply hover:opacity-90 active:opacity-80 active:scale-95 transition-all;
  }

  .btn-secondary {
    @apply bg-panel border border-border text-text-primary px-4 py-2 rounded font-medium;
    @apply hover:border-[#3f3f46] hover:bg-[#1A1A1D] active:scale-95 transition-all;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.04);
  }

  .btn-ghost {
    @apply text-text-primary px-4 py-2 rounded font-medium;
    @apply hover:bg-[#1A1A1D] active:scale-95 transition-all;
  }

  /* Input styling */
  .input {
    @apply bg-panel border border-border text-text-primary px-3 py-2 rounded;
    @apply focus:outline-none focus:ring-2 focus:ring-accent;
  }

  /* Section label â€” uppercase micro-label (Blender/Figma style) */
  .section-label {
    @apply text-[10px] font-medium uppercase tracking-[0.08em] select-none;
    color: #71717A;
  }

  /* Scrollbar styling */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-background;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-border rounded;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-accent;
  }

  /* Auto-hiding scrollbar */
  .auto-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  .auto-scrollbar:hover {
    scrollbar-color: #3f3f46 transparent;
  }

  .auto-scrollbar::-webkit-scrollbar {
    width: 5px;
    height: 5px;
  }

  .auto-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .auto-scrollbar::-webkit-scrollbar-thumb {
    background: transparent;
    border-radius: 3px;
  }

  .auto-scrollbar:hover::-webkit-scrollbar-thumb {
    background: #3f3f46;
  }

  .auto-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #52525b;
  }

  /* Context menu */
  .context-menu {
    @apply backdrop-blur-md border border-[#333] rounded-lg shadow-xl;
    background-color: rgba(26, 26, 29, 0.95);
    animation: context-menu-appear 0.12s ease-out;
    min-width: 180px;
    padding: 4px;
  }

  .context-menu-item {
    @apply flex items-center gap-2 px-3 py-1.5 text-sm text-text-primary rounded;
    @apply hover:bg-accent/15 hover:text-text-primary cursor-pointer transition-colors;
  }

  .context-menu-item[data-danger="true"] {
    @apply text-red-400 hover:bg-red-500/15 hover:text-red-300;
  }

  .context-menu-divider {
    @apply my-1 border-t border-[#333];
  }

  .context-menu-shortcut {
    @apply ml-auto text-xs;
    color: #71717A;
  }

  .context-menu-submenu-trigger {
    @apply flex items-center gap-2 px-3 py-1.5 text-sm text-text-primary rounded;
    @apply hover:bg-accent/15 hover:text-text-primary cursor-pointer transition-colors;
  }

  /* Save dot indicator */
  .save-dot {
    @apply w-2 h-2 rounded-full;
  }

  .save-dot[data-state="saved"] {
    @apply bg-success;
  }

  .save-dot[data-state="unsaved"] {
    @apply bg-warning;
  }

  .save-dot[data-state="saving"] {
    @apply bg-accent animate-pulse;
  }

  /* Status indicators */
  .status-online {
    @apply bg-success;
  }

  .status-offline {
    @apply bg-text-secondary;
  }

  .status-error {
    @apply bg-error;
  }
}

@layer utilities {
  /* Grid spacing utilities */
  .spacing-grid {
    gap: var(--grid, 16px);
  }

  /* Text utilities */
  .text-gradient {
    @apply bg-gradient-to-r from-accent to-accent-light bg-clip-text text-transparent;
  }

  /* Surface utilities */
  .bg-surface-1 {
    background-color: var(--surface-1);
  }

  .bg-surface-2 {
    background-color: var(--surface-2);
  }

  .bg-surface-3 {
    background-color: var(--surface-3);
  }

  /* Loading animation */
  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  .animate-spin {
    animation: spin 1s linear infinite;
  }

  /* Fade in animation */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-in;
  }

  /* Slide in animation */
  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  /* Context menu animation */
  @keyframes context-menu-appear {
    0% { opacity: 0; transform: scale(0.96) translateY(-2px); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
  }
}

/* Three.js canvas styling */
canvas {
  outline: none;
  touch-action: none;
}
